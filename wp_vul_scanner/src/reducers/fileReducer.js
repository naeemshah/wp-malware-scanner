export default function file(
    state = {
       rootFiles:[],
       featching:false,
       allSelected:{},

    },
    action
  ) {
    switch (action.type) {
      case 'FETCH_FILES': {
        return { ...state, featching: true };
      }
      case 'FETCHED_FILES': {
        return { ...state, featching: false,rootFiles:action.payload };
      }

      case 'SELECT_ALL_FILES': {
        let Files = JSON.parse(JSON.stringify(state));
        let allSelected = Files.allSelected,
        temp=[],
        selectAction  = Object.keys(allSelected).length;

       for(let i in Files.rootFiles ){
         
             if(selectAction){
              allSelected = {};
            Files.rootFiles[i].selected = 1;
             }else{
              allSelected[Files.rootFiles[i].name+i] = true;
              Files.rootFiles[i].selected = 0;
             }
             
        }

        return { ...state, rootFiles:Files.rootFiles,allSelected:allSelected};
      }

      case 'SELECT_THIS_FILE': {

        let Files = JSON.parse(JSON.stringify(state));
        let allSelected = Files.allSelected;
        let fileName = Files.rootFiles[action.payload].name;
        Files.rootFiles[action.payload].selected = !Files.rootFiles[action.payload].selected;

        if(!Files.rootFiles[action.payload].selected)
         allSelected[fileName+action.payload] = true;
         else
         delete  allSelected[fileName+action.payload] 
         
        

        return { ...state, rootFiles:Files.rootFiles,allSelected:allSelected};
      }
     
    }
    return state;
  }
  